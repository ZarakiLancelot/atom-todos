<section class="auth">
  <h1>Iniciar sesión</h1>

  <div class="page">
    <mat-card class="card">
      <mat-card-header class="card-header">
        <mat-card-title>Bienvenido</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <form
          [formGroup]="form"
          (ngSubmit)="onSubmit()"
          [attr.aria-busy]="loading() === true ? 'true' : null"
          autocomplete="off"
        >
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Correo</mat-label>
            <input type="email" matInput formControlName="email" placeholder="tu@email.com" />
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="email.touched && email.errors?.['required']">El correo es obligatorio</mat-error>
            <mat-error *ngIf="email.touched && email.errors?.['email']">Ingresa un correo válido</mat-error>
          </mat-form-field>

          <div class="actions">
            <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || loading()">
              {{ loading() ? 'Procesando...' : 'Continuar' }}
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</section>

<dialog #confirmDialog (close)="onDialogClose($event)">
  <h3>Usuario no encontrado</h3>
  <p>¿Deseas crear una nueva cuenta con este correo?</p>

  <form method="dialog" class="actions">
    <button value="cancel" mat-button>Cancelar</button>
    <button value="ok" mat-raised-button color="primary">Crear cuenta</button>
  </form>
</dialog>
